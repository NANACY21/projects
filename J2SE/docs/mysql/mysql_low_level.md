### 概述(1-95 初级篇)
1. 多个线程执行Java代码，修改同一个变量，需要锁来确保数据的准确性，即线程安全。多个事务访问数据库，事务机制保证数据的准确性安全性。
2. `关系型数据库`，二维表，现实世界的事物可梳理成这种表的关系。非关系型数据库是关系型数据库的阉割轻量级版本。相较rdbms，非关系型舍掉其复杂功能，以获得更高的性能。 关系型数据库例如mysql等。非关系型数据库：键值型数据库如redis，文档型数据库mongodb，搜索引擎数据库es等。mysql是一个关系型数据库软件，在互联网系统中用作数据存储。
3. `er模型`，是把现实事物抽象成数据表的一个模型
4. `结构化`：即有一定格式(format)关系型db处理不了非结构化。
5. 数据库字符集和表的字符集可以不一样，但应该一样。
### sql分类
1. DDL：数据定义语言，建表建视图等
2. DML：数据操作语言，增删改查
3. DCL：数据控制语言，提交回滚事务等
### 一些小知识点
- 查询去重关键字放最前面时含义是字段的组合去重。
- 空值参与运算 结果为空
- 着重号
- where过滤里的字符串Windows下也不区分大小写
### 运算符
1. `算术运算符`如+-*/ div % mod 注意不同类型数据加减时结果，取模运算 % 取余数
2. `比较运算符`如= != 区间 in like。_下划线：匹配任意一个字符，%百分号：匹配0个或多个字符，[]：匹配[]中的任意一个字符
    1. 如[acgd]表示匹配a c g d中的任何一个，对于连续的，可写成[a-d]
    2. [^]：不匹配[]中的任何一个字符。写成[^acgd]。安全等于 <=> 和=唯一区别是null参与时不同。where 表达式返回1的是要的数据
3. `逻辑运算符` 与或非 and 优先级高于or 先运算and
4. `位运算符`：按位与 按位或 右移一位。4<<1左移一位 右移动一位 在一定范围内相当于乘以2/除以2 因为可以看看动画演示原理。


### 排序与分页
- 排序 二级排序
- 分页 分页相关 只关注当前页索引 页大小 注意 mysql limit 行索引,每页数量，和前端交互需要转换一下。

### 多表查询
为什么不把歌曲表、专辑表、唱片公司表放在同一张表里：数据冗余 浪费空间 维护困难 多线程操作等待时间长，多表查询连接条件至少表个数-1。  
**多表查询的分类：**  
1. `等值连接非等值连接`，连接条件比较符不是等于
2. `自连接`：员工上级
3. `内连接` 取交集 (inner) join
4. `外连接`
    1. `左外连接`：左表数据+交集 left (outer) join
    2. `右外连接`：右表数据+交集 RIGHT (OUTER) JOIN 右表没匹配上的数据也要
    3. `满外连接`：左表数据+交集+右表数据
   
**UNION运算符**
1. union操作符会去重 union all不会去重
2. 通过组合其它两个结果表(例如 table1 和 table2)并消去表中任何重复行而派生出一个结果表
3. 当 ALL 随 UNION 一起使用时(即UNION ALL)，不消除重复行，两种情况下，派生表的每一行不是来自table1就是来自table2。

**EXCEPT运算符**
1. 通过包括所有在 table1 中但不在 table2 中的行并消除所有重复行而派生出一个结果表
2. 当 ALL 随 EXCEPT 一起使用时(EXCEPT ALL)，不消除重复行。

**INTERSECT运算符**
1. 通过只包括 table1 和 table2 中都有的行并消除所有重复行而派生出一个结果表
2. 当 ALL 随 INTERSECT 一起使用时(INTERSECT ALL)，不消除重复行。

### 了解即可：sql99新特性
- 自然连接
- using连接

### 1-31 (已看完)
### 32-39 sql中的函数 对功能的封装  (未看)
### 40-42 group by having (未看)
1. 一张表，一旦分组完成后，查询后只能得到组相关的信息。
2. 组相关的信息：如统计信息，count，avg，sum，max，min等这些都可作为分组的标准。  
where不能跟聚合函数 having可以跟聚合函数和普通过滤条件 普通过滤条件写在where后面

### 43-48 子查询相关(未看)
### 49-51 创建/修改数据库/数据表 注意字符集相关(未看)

### commit rollback相关!!!
一旦提交不可回滚。 `rollback`回滚操作 回滚到最近一次提交之后的状态  
truncate 表 删除且不可回滚。delete from 删除数据可以回滚  
ddl一旦执行不可以回滚  
dml默认情况一旦执行也是不可回滚 可以修改参数 使得执行后可以回滚  
执行！=提交 一般默认 执行完自动提交 而对于dml 事先执行 set自动提交=否 则可以回滚  
事务是多个操作组成 具有原子性  

### mysql8.0新特性 ddl原子化
### mysql8.0新特性 计算列

### mysql数据类型
1. 整数类型
2. 浮点类型
3. 定点数类型
4. 位类型
5. 日期时间类型 year date time datetime(首推) 时间戳 添加数据时存在隐式转换
6. 文本字符串类型

**unsigned**
该字段无符号位，一般作用于int类型的字段  
**ZEROFILL**
零填充，会将有效位以外的位用0来显示，比如某字段数据类型为INT(5)，插入值为2，将显示00002  
**不同数据类型所存储的数据的范围大小**
浮点数类型 vs 定点数类型：在长度一定范围下(存储空间一样大) 浮点类型相较定点数取值范围更大但是不精确  
decimal的括号表示什么？  
datetime vs timestamp  
时间戳底层存储时根据时区进行转换 查询时再根据当前时区进行转换  
char(占用存储空间固定) vs varchar(占用存储空间不固定)  
char 固定长度 效率高 占固定存储空间 比如char(5) 5个字符 会用空位补全  
c 吃 都叫一个字符  
定长字段一般使用char 比如手机号  
varchar(1000) 可变长度 效率低 1000个字符 如果实际存三个字符 则就占3*3个字节 而char占1000*3个字节  


### 约束66- sql优化的前置知识
mysql约束 类似表单数据保存的数据校验!!!保证数据完整性  
**约束的分类:**  
1. 从约束字段个数角度：
    1. `单列约束`
    2. `多列约束`
2. 从约束范围角度：
    1. 表级约束(作用在多个字段上的约束只能定义在表级别，例如复合主键约束!!!) 表级别上定义的约束可以给约束起名字(CHECK约束除外)
    2. 字段级约束(只是针对写法的) 列级不能给约束起名字，由MySQL自动命名
3. 从约束的功能作用角度：
    1. `非空约束(列级约束)` not null约束只能在字段级别定义 限制字段不能为null
    2. `唯一性约束` unique(列级约束)
        - 字段的值不能重复
        - 唯一约束的字段可以为null 且null可以有多个
        - 复合唯一性约束 字段的组合不能重复!!!
        - 添加唯一约束的列会自动创建唯一索引给这个字段!!!
        - 删除唯一约束通过删除唯一索引的方式删除!!!
        - 唯一约束名和唯一索引名一样
        - 不可重复独立性，则该字段的值不能出现重复值，而且唯一键的列，允许有空值，主键不允许出现空值，允许出现多个唯一键
    3. `主键约束`
        - 更严格的唯一性约束
        - 元组唯一性，有序性，该字段不能空并且不能重复，每个表最多只允许一个主键!!!
        - 创建主键约束时这一字段会自动创建主键索引!!!
        - 还可以有联合主键约束：这些列的组合不能重复并且这些列都不能为空!!!
    4. `外键约束` 阿里规约：不使用外键 外键约束需要在表级别定义
        - 主子表的概念 专辑表歌曲表一主多子
        - 外键约束不能表跨(存储)引擎!!!
        - 创建外键约束时 会自动给该字段创建普通索引 约束名=索引名
        - 删除外键约束 还需手动删除对应的索引!!!
        - 外键约束等级

        - 外键中的级联关系有以下几种情况：
          - ON DELETE  CASCADE    删除主表中的数据时，从表中的数据随之删除：同步删除
          - ON UPDATE  CASCADE    更新主表中的数据时，从表中的数据随之更新：同步更新
          - ON DELETE  SET NULL   删除主表中的数据时，从表中的数据置为空：删除置空
        - 默认删除主表中的数据前需先删除从表中的数据，否则主表数据不会被删除：删除前检测从表(引用检查)
        - 具有外键约束的列的值不能随便给，必须满足外键所引用的主键的取值(数值合法性)
        - 一张表中可以定义多个外键
        - 外键列默认可以给null值。按照定义，外键必须引用一个主键或者唯一键，引用的主键一般在另外一张表中，也可以是本表的主键(自引用)
        - 外键所在的表叫做子表、从表。外键所引用的主键所在的表叫做父表、主表
        - 父子表是相对而言的，表A可为表B的子表，但同时也可以是表C的父表
    5. `检查约束` check 字段值的限制
    6. `默认值约束` default 设默认值

**增删改查约束**
创建表时增加约束 修改表时增加约束 删除约束  
查看表中的约束:  
`select * from information_schema.TABLE_CONSTRAINTS where TABLE_NAME='mus_song';`  

约束和索引是两个概念 有相关联的地方 可以比较着学习

### 关于自增
删除数据后 id从几开始 需要重启数据库服务器 mysql版本不同也有所不同

### 视图
数据库对象:表，视图，数据字典，约束，索引，存储过程，存储函数，触发器(类似事件监听)!!!  
学习视图最重要的是理解视图的概念  
为什么用视图:对于一张表或多张表 可以有不同视图 对应不同权限的人群!!!  
视图新建删除不影响基表 视图改数据同步到基表 反之也同步!!!  
视图就是存储起来的select语句!!!响应速度快占空间!!!  
视图是虚拟表 不存储数据 表才存储数据  
视图优点:简化查询 减少数据冗余(只有一份数据) 控制访问数据权限  
视图中的字段在基表中可能没有对应的字段  
视图很多情况是不可更新的  
修改视图(更新存储的查询语句) 删除视图  


### 存储过程与存储函数
存储过程就是一个函数 里面逻辑是一堆sql 预先编译了sql 调用一个方法  
类似Java方法  
inout是入参出参放在同一个变量  
set @变量名='haha';  
存储函数的创建与使用类似存储过程 存储函数必有返回值!!!  
存储过程一般作更新行为!!!  
存储函数一般作查询行为!!!mysql系统也有一些系统函数 类似存储函数  


### 变量、游标、分支结构
83-91(未看)
### 触发器
92-93(未看)

### mysql8其他新特性
字符集 优化器 索引 存储引擎等方面都做了改进  
1. `窗口函数` 注意与group by分组的区别
2. `公用表表达式` 类似会话变量 子查询的复用 递归公用表表达式